{"version":3,"file":"handlers-C1Fw7Kyn.js","sources":["../../src/js/products-api.js","../../src/js/render-function.js","../../src/js/modal.js","../../src/js/handlers.js"],"sourcesContent":["import axios from 'axios';\nimport { BASE_URL, ENDPOINTS, ITEMS_PER_PAGE } from './constants';\n\naxios.defaults.baseURL = BASE_URL;\n\nexport const fetchCategories = async () => {\n  const { data } = await axios(`${ENDPOINTS.CATEGORIES}`);\n  return data;\n};\n\nexport const fetchProducts = async (page) => {\n    const skip = (page - 1) * ITEMS_PER_PAGE;\n    const { data } = await axios(`${ENDPOINTS.PRODUCTS}?limit=${ITEMS_PER_PAGE}&skip=${skip}`);\n    return data;\n    \n};\n\nexport const fetchByCategory = async (category) => {\n  const { data } = await axios(`${ENDPOINTS.PRODUCTS_BY_CATEGORY}/${category}`);\n  return data;\n};\n\n// Ð¤ÑƒÐ½ÐºÑ†Ñ–Ñ Ð¿Ð¾Ð²ÐµÑ€Ñ‚Ð°Ñ” Ð¾Ð´Ð¸Ð½ Ð¿Ñ€Ð¾Ð´ÑƒÐºÑ‚ Ð¿Ð¾ Ð¹Ð¾Ð³Ð¾ ID\nexport const fetchModal = async (id) => {\n  const { data } = await axios(`${ENDPOINTS.PRODUCTS_BY_ID}/${id}`);\n  return data;\n};\n\n// Ñ„ÑƒÐ½ÐºÑ†Ñ–Ñ Ð¿Ð¾Ð²ÐµÑ€Ñ‚Ð°Ñ” Ð¼Ð°ÑÑÐ¸Ð² Ð¿Ñ€Ð¾Ð´ÑƒÐºÑ‚Ñ–Ð² Ð·Ð° Ð·Ð°Ð´Ð°Ð½Ð¸Ð¼Ð¸ ID\nexport const fetchProductsByIds = async (Ids) => {\n  try {\n    const { data } = await axios(`${ENDPOINTS.PRODUCTS}?limit=0`);\n    const allProducts = data;\n    const filteredProducts = allProducts.products.filter(product => Ids.includes(String(product.id)));\n    return filteredProducts;\n  } catch (error) {\n    console.error(\"Error fetching products:\", error);\n    return [];\n  } \n};\n\nexport const fetchQuery = async (query, page) => { \n  const skip = (page - 1) * ITEMS_PER_PAGE;\n  const { data } = await axios(`${ENDPOINTS.PRODUCTS_BY_QUERY}?q=${query}&limit=${ITEMS_PER_PAGE}&skip=${skip}`);\n  return data;\n};\n\n","import { refs } from './refs';\n\nexport const renderCategories = data => {\n  //   const allData = ['All', ...data];\n  const markup = data\n    .map(\n      el => `<li class=\"categories__item\">\n   <button class=\"categories__btn\" type=\"button\">${el}</button>\n </li>`\n    )\n    .join('');\n\n  refs.categoryList.innerHTML = markup;\n};\n\nexport const renderProducts = (products) => {\n  const markup = products.map(({ id, thumbnail, title, brand, category, price }) => `\n    <li class=\"products__item\" data-id=\"${id}\">\n    <img class=\"products__image\" src=\"${thumbnail}\" alt=\"${title}\"/>\n    <p class=\"products__title\">${title}</p>\n    <p class=\"products__brand\"><span class=\"products__brand--bold\">Brand:</span>${brand}</p>\n    <p class=\"products__category\">Category: ${category} </p>\n    <p class=\"products__price\">Price: $${price}</p>\n </li>\n    `).join(\"\");\n\n  refs.productsList.innerHTML = markup;\n};\n\nexport const renderEmptyMessage = (container, message) => {\n  container.innerHTML = `<p class=\"empty-message\">${message}</p>`;\n};\n\nexport const renderModal = (modal) => {\n\n  const { thumbnail, title, tags, description, shippingInformation, returnPolicy, price } = modal;\n  const markup = `\n  <img class=\"modal-product__img\" src=\"${thumbnail}\" alt=\"${title}\" />\n      <div class=\"modal-product__content\">\n        <p class=\"modal-product__title\">${title}</p>\n        <ul class=\"modal-product__tags\">${tags}</ul>\n        <p class=\"modal-product__description\">${description}</p>\n        <p class=\"modal-product__shipping-information\">Shipping:${shippingInformation}</p>\n        <p class=\"modal-product__return-policy\">Return Policy:${returnPolicy}</p>\n        <p class=\"modal-product__price\">Price:${price} $</p>\n        <button class=\"modal-product__buy-btn\" type=\"button\">Buy</button>\n      </div>\n  `;\n\n  refs.modalContainer.innerHTML = markup;\n};\n\n\n\n","import { setCurrentProduct } from \"../cart\";\n\nconst modalEl = document.querySelector('.modal');\n\nexport const openModal = productId => {  \n    console.log(\"ðŸ§© Ð’Ñ–Ð´ÐºÑ€Ð¸Ð²Ð°Ñ”Ð¼Ð¾ Ð¼Ð¾Ð´Ð°Ð»ÐºÑƒ Ð· ID:\", productId);\n    setCurrentProduct(productId);\n\n    if (modalEl) {\n        modalEl.classList.add('modal--is-open');\n    };\n};\n\nexport const closeModal = () => {\n    modalEl.classList.remove('modal--is-open');\n}\n\n\n","import iziToast from 'izitoast';\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { activeFirstBtn, clearProducts, highlightActiveCategory, updateCartCounter, updateWishlistCounter, updateWishlistBtnText} from './helpers';\nimport { fetchCategories, fetchProducts, fetchModal,  fetchByCategory, fetchQuery  } from './products-api';\nimport { renderCategories, renderProducts, renderEmptyMessage, renderModal } from './render-function';\nimport { refs } from './refs.js';\nimport { openModal } from './modal.js';\nimport { currentProductId, updateCartBtnText } from '../cart.js';\nimport { addToWishlist, addToCart, isInCart, isInWishlist, removeFromCart, removeFromWishlist } from './storage.js';\n\nlet currentPage = 1;\n\n\nexport const getCategories = async () => {\n  try {\n    const data = await fetchCategories();\n    \n    renderCategories(['All', ...data]);\n    activeFirstBtn();\n  } catch (error) {\n    iziToast.error({ title: 'Error', message: error.message });\n  }\n};\n\nexport const getProducts = async () => {\n  try {\n    const { products, total } = await fetchProducts(currentPage);\n    \n    renderProducts(products);\n  } catch (error) {\n    iziToast.error({ title: 'Error', message: error.message });\n    \n  }\n};\n\n// ÐœÐ¾Ð´Ð°Ð»ÑŒÐ½Ðµ Ð²Ñ–ÐºÐ½Ð¾\nexport const getModal = async (event) => {\n  const card = event.target.closest(\".products__item\");\n  const cardId = card.dataset.id;  \n  \n  try {\n    const data = await fetchModal(cardId);\n    openModal(cardId);\n    renderModal(data);\n\n\n  } catch (error) {\n    iziToast.error({ title: 'Error', message: error.message });\n    \n  }\n}\n\n\n//  ÐšÐ»Ñ–Ðº Ð¿Ð¾ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ñ–Ñ— ===\nexport const handleCategoryClick = async (e) => {\n  if (!e.target.classList.contains('categories__btn')) return;\n\n  const currentCategory = e.target.textContent;\n\n  \n \n  refs.productsList.innerHTML = '';\n\n  try {\n    const data = await fetchByCategory(currentCategory);\n    renderProducts(data.products);\n    highlightActiveCategory(e.target);\n  } catch (err) {\n    iziToast.error({ title: 'Error', message: err.message });\n  }\n};\n\n\nexport const getProductsByQuery = async (event) => { \n  event.preventDefault();\n  const query = event.target.elements.searchValue.value.trim();\n\n  \n\n  if (!query) return;\n\n  try {\n    const { products } = await fetchQuery(query, currentPage);\n    \n    if (products.length === 0) {\n      console.log(\"ok\");\n      clearProducts();\n      return refs.notFoundDiv.classList.add(\"not-found--visible\");\n    } else {\n      renderProducts(products);\n    };    \n  } catch (error) {\niziToast.error({ title: 'Error', message: error.message });\n  }\n};\n\nexport const getClearForm = () => {\n  refs.form.reset();\n  getProducts();\n}\n\n// click add/remove to/from cart\n\nexport const addProductByIdToCart = () => {\n  if(currentProductId === null) {\n   return;\n  }  \n\n  if(isInCart(currentProductId)) {\n    removeFromCart(currentProductId);\n  } else {\n    addToCart(currentProductId);\n  }\n\n  updateCartBtnText();\n  updateCartCounter();\n};\n\n//Iryna Wishlist click handler\n\nexport const addProductByIdToWishlist = () => {\n  if(currentProductId === null) {\n   return;\n  }  \n\n  if(isInWishlist(currentProductId)) {\n    removeFromWishlist(currentProductId);\n  } else {\n    addToWishlist(currentProductId);\n  }\n\n  updateWishlistBtnText(currentProductId);\n  updateWishlistCounter();\n};\n\n"],"names":["axios","BASE_URL","fetchCategories","data","ENDPOINTS","fetchProducts","page","skip","ITEMS_PER_PAGE","fetchByCategory","category","fetchModal","id","fetchProductsByIds","Ids","product","error","fetchQuery","query","renderCategories","markup","el","refs","renderProducts","products","thumbnail","title","brand","price","renderModal","modal","tags","description","shippingInformation","returnPolicy","modalEl","openModal","productId","setCurrentProduct","closeModal","currentPage","getCategories","activeFirstBtn","iziToast","getProducts","total","getModal","event","cardId","handleCategoryClick","e","currentCategory","highlightActiveCategory","err","getProductsByQuery","clearProducts","getClearForm","addProductByIdToCart","currentProductId","isInCart","removeFromCart","addToCart","updateCartBtnText","updateCartCounter","addProductByIdToWishlist","isInWishlist","removeFromWishlist","addToWishlist","updateWishlistBtnText","updateWishlistCounter"],"mappings":"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"}