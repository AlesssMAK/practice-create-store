import{a as l,i as d}from"./vendor-Cbhu4xvy.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))c(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&c(i)}).observe(document,{childList:!0,subtree:!0});function r(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function c(s){if(s.ep)return;s.ep=!0;const n=r(s);fetch(s.href,n)}})();const q="https://dummyjson.com/",u={CATEGORIES:"products/category-list",PRODUCTS:"products",PRODUCTS_BY_ID:"products",PRODUCTS_BY_CATEGORY:"products/category",PRODUCTS_BY_QUERY:"products/search"},p=12,_="cart",h="wishlist",m=()=>JSON.parse(localStorage.getItem(_))||[],C=t=>localStorage.setItem(_,JSON.stringify(t)),A=t=>{const e=m();e.includes(t)||(e.push(t),C(e))},D=t=>{const e=m().filter(r=>r!==t);C(e)},S=t=>m().includes(t),y=()=>JSON.parse(localStorage.getItem(h))||[],L=t=>localStorage.setItem(h,JSON.stringify(t)),W=t=>{console.log("Додаємо до wishlist:",t);const e=y();e.includes(t)||(e.push(t),L(e))},x=t=>{const e=y().filter(r=>r!==t);L(e)},T=t=>y().includes(t),o={categoryList:document.querySelector(".categories"),productsList:document.querySelector("ul.products"),notFoundDiv:document.querySelector(".not-found"),modalContainer:document.querySelector(".modal-product"),modalCloseBtn:document.querySelector(".modal__close-btn"),form:document.querySelector(".search-form"),formBtnClear:document.querySelector(".search-form__btn-clear"),modal:document.querySelector(".modal"),addToCartBtn:document.querySelector(".modal-product__btn--cart"),navCounter:document.querySelector(".nav__count"),countCartItem:document.querySelector("[data-count]"),priceCartTotal:document.querySelector("[data-price]"),buyBtn:document.querySelector(".cart-summary__btn"),addToWishlistBtn:document.querySelector(".modal-product__btn--wishlist")},k=()=>{const t=document.querySelector(".categories__btn");t&&t.classList.add("categories__btn--active")},M=t=>{document.querySelectorAll(".categories__btn").forEach(e=>e.classList.remove("categories__btn--active")),t.classList.add("categories__btn--active")},P=()=>{o.productsList.innerHTML=""},U=()=>{const t=document.querySelector(".nav__count");if(!t)return;const e=m();t.textContent=e.length},b=t=>{Array.isArray(t)&&o.countCartItem&&(o.countCartItem.textContent=t.length)},v=t=>{if(!Array.isArray(t)||!o.priceCartTotal)return;const e=t.reduce((r,c)=>r+c.price,0);o.priceCartTotal.textContent=`$${e.toFixed(2)}`},Y=()=>{const t=document.querySelector(".wishlist-items-count");if(!t)return;const e=y();t.textContent=e.length},E=t=>{T(t)?o.addToWishlistBtn.textContent="Remove from Wishlist":o.addToWishlistBtn.textContent="Add to Wishlist"};l.defaults.baseURL=q;const N=async()=>{const{data:t}=await l(`${u.CATEGORIES}`);return t},F=async t=>{const e=(t-1)*p,{data:r}=await l(`${u.PRODUCTS}?limit=${p}&skip=${e}`);return r},H=async t=>{const{data:e}=await l(`${u.PRODUCTS_BY_CATEGORY}/${t}`);return e},G=async t=>{const{data:e}=await l(`${u.PRODUCTS_BY_ID}/${t}`);return e},J=async t=>{try{const{data:e}=await l(`${u.PRODUCTS}?limit=0`);return e.products.filter(s=>t.includes(String(s.id)))}catch(e){return console.error("Error fetching products:",e),[]}},j=async(t,e)=>{const r=(e-1)*p,{data:c}=await l(`${u.PRODUCTS_BY_QUERY}?q=${t}&limit=${p}&skip=${r}`);return c},Q=t=>{const e=t.map(r=>`<li class="categories__item">
   <button class="categories__btn" type="button">${r}</button>
 </li>`).join("");o.categoryList.innerHTML=e},g=t=>{const e=t.map(({id:r,thumbnail:c,title:s,brand:n,category:i,price:f})=>`
    <li class="products__item" data-id="${r}">
    <img class="products__image" src="${c}" alt="${s}"/>
    <p class="products__title">${s}</p>
    <p class="products__brand"><span class="products__brand--bold">Brand:</span>${n}</p>
    <p class="products__category">Category: ${i} </p>
    <p class="products__price">Price: $${f}</p>
 </li>
    `).join("");o.productsList.innerHTML=e},K=t=>{const{thumbnail:e,title:r,tags:c,description:s,shippingInformation:n,returnPolicy:i,price:f}=t,R=`
  <img class="modal-product__img" src="${e}" alt="${r}" />
      <div class="modal-product__content">
        <p class="modal-product__title">${r}</p>
        <ul class="modal-product__tags">${c}</ul>
        <p class="modal-product__description">${s}</p>
        <p class="modal-product__shipping-information">Shipping:${n}</p>
        <p class="modal-product__return-policy">Return Policy:${i}</p>
        <p class="modal-product__price">Price:${f} $</p>
        <button class="modal-product__buy-btn" type="button">Buy</button>
      </div>
  `;o.modalContainer.innerHTML=R};let a=null;const z=t=>{a=t,$(),E(a)},$=()=>{a!==null&&(S(a)?o.addToCartBtn.textContent="Remove from Cart":o.addToCartBtn.textContent="Add to Cart")},V=async()=>{const t=m();if(t.length)try{const e=await J(t);g(e),b(e),v(e)}catch(e){console.error("Помилка завантаження товарів:",e)}};document.addEventListener("DOMContentLoaded",()=>{o.buyBtn&&o.buyBtn.addEventListener("click",et),V()});document.addEventListener("DOMContentLoaded",()=>{o.productsList&&o.productsList.addEventListener("click",tt)});const B=t=>{t.code==="Escape"&&I()},w=t=>{t.target===o.modal&&I()},X=t=>{o.modal.classList.add("modal--is-open"),document.body.style.overflow="hidden",window.addEventListener("keydown",B),o.modal.addEventListener("click",w),z(t)},I=()=>{o.modal.classList.remove("modal--is-open"),document.body.style.overflow="",window.removeEventListener("keydown",B),o.modal.removeEventListener("click",w)};let O=1;const ot=async()=>{try{const t=await N();Q(["All",...t]),k()}catch(t){d.error({title:"Error",message:t.message})}},Z=async()=>{try{const{products:t,total:e}=await F(O);g(t)}catch(t){d.error({title:"Error",message:t.message})}},tt=async t=>{const r=t.target.closest(".products__item").dataset.id;try{const c=await G(r);X(r),K(c)}catch(c){d.error({title:"Error",message:c.message})}},st=async t=>{if(!t.target.classList.contains("categories__btn"))return;const e=t.target.textContent;o.productsList.innerHTML="";try{const r=await H(e);g(r.products),M(t.target)}catch(r){d.error({title:"Error",message:r.message})}},ct=async t=>{t.preventDefault();const e=t.target.elements.searchValue.value.trim();if(e)try{const{products:r}=await j(e,O);if(r.length===0)return P(),o.notFoundDiv.classList.add("not-found--visible");g(r)}catch(r){d.error({title:"Error",message:r.message})}},nt=()=>{o.form.reset(),Z()},at=()=>{a!==null&&(S(a)?D(a):A(a),$(),U())},et=()=>{const t=JSON.parse(localStorage.getItem("cart"));if(!Array.isArray(t)||t.length===0){d.warning({title:"Oops!",message:"Кошик порожній. Додайте товари перед покупкою.",position:"topRight"});return}d.success({title:"Success",message:"You successfully bought all products in the cart!",position:"topRight"}),localStorage.removeItem("cart"),P(),b([]),v([])},it=()=>{a!==null&&(T(a)?x(a):W(a),E(a),Y())};export{at as a,it as b,I as c,g as d,ot as e,J as f,y as g,tt as h,Z as i,st as j,ct as k,nt as l,o as r,Y as u};
//# sourceMappingURL=handlers-Cvt7d0Tm.js.map
