import{a as d,i as H}from"./vendor-4yCzdkXl.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))c(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&c(l)}).observe(document,{childList:!0,subtree:!0});function o(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function c(r){if(r.ep)return;r.ep=!0;const n=o(r);fetch(r.href,n)}})();const j="https://dummyjson.com/",u={CATEGORIES:"products/category-list",PRODUCTS:"products",PRODUCTS_BY_ID:"products",PRODUCTS_BY_CATEGORY:"products/category",PRODUCTS_BY_QUERY:"products/search"},p=12,I="cart",M="wishlist",G=t=>{const o=["All",...t].map(c=>`<li class="categories__item">
   <button class="categories__btn" type="button">${c}</button>
 </li>`).join("");s.categoryList.innerHTML=o},m=t=>{const e=t.map(({id:o,thumbnail:c,title:r,brand:n,category:l,price:S})=>`
    <li class="products__item" data-id="${o}">
    <img class="products__image" src="${c}" alt="${r}"/>
    <p class="products__title">${r}</p>
    <p class="products__brand"><span class="products__brand--bold">Brand:</span>${n}</p>
    <p class="products__category">Category: ${l} </p>
    <p class="products__price">Price: $${S}</p>
 </li>
    `).join("");s.productsList.insertAdjacentHTML("beforeend",e)},J=t=>{const{thumbnail:e,title:o,tags:c,description:r,shippingInformation:n,returnPolicy:l,price:S}=t,N=`
  <img class="modal-product__img" src="${e}" alt="${o}" />
      <div class="modal-product__content">
        <p class="modal-product__title">${o}</p>
        <ul class="modal-product__tags">${c}</ul>
        <p class="modal-product__description">${r}</p>
        <p class="modal-product__shipping-information">Shipping:${n}</p>
        <p class="modal-product__return-policy">Return Policy:${l}</p>
        <p class="modal-product__price">Price:${S} $</p>
        
      </div>
  `;s.modalContainer.innerHTML=N},h=()=>JSON.parse(localStorage.getItem(I))||[],A=t=>localStorage.setItem(I,JSON.stringify(t)),K=t=>{const e=h();e.includes(t)||(e.push(t),A(e))},Q=t=>{const e=h().filter(o=>o!==t);A(e)},O=t=>h().includes(t),f=()=>JSON.parse(localStorage.getItem(M))||[],q=t=>(localStorage.setItem(M,JSON.stringify(t)),console.log(t),t),z=t=>{console.log("Додаємо до wishlist:",t);const e=f();e.includes(t)||(e.push(t),q(e))},V=t=>{const e=f().filter(o=>o!==t);q(e)},R=t=>f().includes(t),D="theme",X=()=>localStorage.getItem(D)||"light",Z=t=>localStorage.setItem(D,t),tt=t=>{document.documentElement.setAttribute("data-theme",t),Z(t)},pt=()=>{const e=X()==="dark"?"light":"dark";tt(e)},s={categoryList:document.querySelector(".categories"),productsList:document.querySelector("ul.products"),notFoundDiv:document.querySelector(".not-found"),modalContainer:document.querySelector(".modal-product"),modalCloseBtn:document.querySelector(".modal__close-btn"),form:document.querySelector(".search-form"),formBtnClear:document.querySelector(".search-form__btn-clear"),modal:document.querySelector(".modal"),addToCartBtn:document.querySelector(".modal-product__btn--cart"),navCounter:document.querySelector(".nav__count"),loadMoreBtn:document.querySelector(".load-more-btn"),countCartItem:document.querySelector("[data-count]"),priceCartTotal:document.querySelector("[data-price]"),buyBtn:document.querySelector(".cart-summary__btn"),addToWishlistBtn:document.querySelector(".modal-product__btn--wishlist")};let a=null;const et=t=>{a=t,W(),x(a)},W=()=>{a!==null&&(O(a)?s.addToCartBtn.textContent="Remove from Cart":s.addToCartBtn.textContent="Add to Cart")},ot=()=>{const t=document.querySelector(".categories__btn");t&&t.classList.add("categories__btn--active")},st=(t,e,o)=>{t.forEach(c=>{c.classList.remove(o)}),e.classList.add(o)},L=()=>{s.productsList.innerHTML=""},rt=()=>{const t=document.querySelector(".nav__count");if(!t)return;const e=h();t.textContent=e.length},v=t=>{Array.isArray(t)&&s.countCartItem&&(s.countCartItem.textContent=t.length)},w=t=>{if(!Array.isArray(t)||!s.priceCartTotal)return;const e=t.reduce((o,c)=>o+c.price,0);s.priceCartTotal.textContent=`$${e.toFixed(2)}`},ct=()=>{const t=document.querySelector(".wishlist-items-count");if(!t)return;const e=f();t.textContent=e.length},x=t=>{R(t)?s.addToWishlistBtn.textContent="Remove from Wishlist":s.addToWishlistBtn.textContent="Add to Wishlist"},B=()=>window.location.pathname.includes("wishlist"),b=()=>window.location.pathname.includes("cart"),g=()=>{s.loadMoreBtn.classList.remove("is-hidden")},y=()=>{s.loadMoreBtn.classList.add("is-hidden")},_=()=>{s.notFoundDiv.classList.add("not-found--visible")},C=()=>{s.notFoundDiv.classList.remove("not-found--visible")};d.defaults.baseURL=j;const nt=async()=>{const{data:t}=await d(`${u.CATEGORIES}`);return t},P=async t=>{const e=(t-1)*p,{data:o}=await d(`${u.PRODUCTS}?limit=${p}&skip=${e}`);return o},at=async t=>{const{data:e}=await d(`${u.PRODUCTS_BY_CATEGORY}/${t}`);return e},it=async t=>{const{data:e}=await d(`${u.PRODUCTS_BY_ID}/${t}`);return e},U=async t=>{try{const{data:e}=await d(`${u.PRODUCTS}?limit=0`);return e.products.filter(r=>t.includes(String(r.id)))}catch(e){return console.error("Error fetching products:",e),[]}},lt=async t=>{const{data:e}=await d(`${u.PRODUCTS_BY_QUERY}?q=${t}`);return e},Y=t=>{t.code==="Escape"&&T()},k=t=>{t.target===s.modal&&T()},dt=t=>{s.modal.classList.add("modal--is-open"),document.body.style.overflow="hidden",window.addEventListener("keydown",Y),s.modal.addEventListener("click",k),et(t)},T=()=>{s.modal.classList.remove("modal--is-open"),document.body.style.overflow="",window.removeEventListener("keydown",Y),s.modal.removeEventListener("click",k)};let i=1,F="All";const ht=async()=>{try{const t=await nt();G(t),ot()}catch(t){console.log(t)}},ut=async()=>{try{i=1;const{products:t,total:e}=await P(i);m(t);const o=Math.ceil(e/p);i>=o?H.info({message:"We're sorry, but you've reached the end.",position:"topRight"}):g()}catch(t){console.log(t)}},ft=async()=>{if(F==="All"){i++,y();try{const{products:t,total:e}=await P(i);m(t);const o=Math.ceil(e/p);i<o&&g()}catch(t){console.log(t)}}},gt=async t=>{const o=t.target.closest(".products__item").dataset.id;try{const c=await it(o);dt(o),J(c)}catch(c){console.log(c)}},yt=async t=>{if(t.target.classList.contains("categories__btn")){y(),L(),i=1;try{const e=t.target.textContent;F=e;const o=document.querySelectorAll(".categories__btn");st(o,t.target,"categories__btn--active");let c;if(e==="All"?(i=1,c=await P(i),g()):c=await at(e),c.products.length>0){if(m(c.products),y(),e==="All"){const r=Math.ceil(c.total/p);i<r&&g()}}else _()}catch(e){console.log(e)}}},_t=async t=>{t.preventDefault();const e=t.target.elements.searchValue.value.trim();if(e){L(),y();try{const{products:o}=await lt(e);o.length===0?_():(m(o),C())}catch(o){console.log(o)}}},Ct=()=>{L(),C(),s.form.reset(),ut()},$=async()=>{const t=h();if(!t.length){s.productsList.innerHTML="",_(),v([]),w([]);return}const e=await U(t);s.productsList.innerHTML="",m(e),v(e),w(e),C()},Tt=()=>{T()},St=()=>{a!==null&&(O(a)?(Q(a),b()&&$()):(K(a),b()&&$()),W(),rt())},E=async()=>{const t=f();if(t.length===0){s.productsList.innerHTML="",_();return}const e=await U(t);s.productsList.innerHTML="",m(e)},Lt=()=>{a!==null&&(R(a)?(V(a),B()&&E()):(z(a),B()&&E(),C()),x(a),ct())},Pt=()=>{T()};export{E as L,tt as a,St as b,Pt as c,Lt as d,_t as e,rt as f,X as g,gt as h,ht as i,ut as j,yt as k,T as l,ft as m,Ct as n,$ as o,Tt as p,h as q,s as r,A as s,pt as t,ct as u,L as v,v as w,w as x};
//# sourceMappingURL=handlers-B8AqviPj.js.map
