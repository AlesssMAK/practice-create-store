import{a as f,i as l}from"./vendor-4yCzdkXl.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const p of a.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&s(p)}).observe(document,{childList:!0,subtree:!0});function o(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(r){if(r.ep)return;r.ep=!0;const a=o(r);fetch(r.href,a)}})();const n={categoryList:document.querySelector(".categories"),productsList:document.querySelector("ul.products"),notFoundDiv:document.querySelector(".not-found"),modalContainer:document.querySelector(".modal-product"),modalCloseBtn:document.querySelector(".modal__close-btn"),form:document.querySelector(".search-form"),formBtnClear:document.querySelector(".search-form__btn-clear"),modal:document.querySelector(".modal"),addToCartBtn:document.querySelector(".modal-product__btn--cart"),navCounter:document.querySelector(".nav__count"),loadMoreBtn:document.querySelector(".load-more-btn"),countCartItem:document.querySelector("[data-count]"),priceCartTotal:document.querySelector("[data-price]"),buyBtn:document.querySelector(".cart-summary__btn"),addToWishlistBtn:document.querySelector(".modal-product__btn--wishlist"),scrollBtn:document.querySelector(".scroll-top-btn"),header:document.querySelector("header")},et="https://dummyjson.com/",_={CATEGORIES:"products/category-list",PRODUCTS:"products",PRODUCTS_BY_ID:"products",PRODUCTS_BY_CATEGORY:"products/category",PRODUCTS_BY_QUERY:"products/search"},u=12,k="cart",x="wishlist",ot=t=>{const o=["All",...t].map(s=>`<li class="categories__item">
   <button class="categories__btn" type="button">${s}</button>
 </li>`).join("");n.categoryList.innerHTML=o},C=t=>{const e=t.map(({id:o,thumbnail:s,title:r,brand:a,category:p,price:B})=>`
    <li class="products__item" data-id="${o}">
    <img class="products__image" src="${s}" alt="${r}"/>
    <p class="products__title">${r}</p>
    <p class="products__brand"><span class="products__brand--bold">Brand:</span>${a}</p>
    <p class="products__category">Category: ${p} </p>
    <p class="products__price">Price: $${B}</p>
 </li>
    `).join("");n.productsList.insertAdjacentHTML("beforeend",e)},st=t=>{const{thumbnail:e,title:o,tags:s,description:r,shippingInformation:a,returnPolicy:p,price:B}=t,tt=`
  <img class="modal-product__img" src="${e}" alt="${o}" />
      <div class="modal-product__content">
        <p class="modal-product__title">${o}</p>
        <ul class="modal-product__tags">${s}</ul>
        <p class="modal-product__description">${r}</p>
        <p class="modal-product__shipping-information">Shipping:${a}</p>
        <p class="modal-product__return-policy">Return Policy:${p}</p>
        <p class="modal-product__price">Price:${B} $</p>
        
      </div>
  `;n.modalContainer.innerHTML=tt},S=()=>JSON.parse(localStorage.getItem(k))||[],U=t=>localStorage.setItem(k,JSON.stringify(t)),rt=t=>{const e=S();e.includes(t)||(e.push(t),U(e))},nt=t=>{const e=S().filter(o=>o!==t);U(e)},Y=t=>S().includes(t),T=()=>JSON.parse(localStorage.getItem(x))||[],F=t=>(localStorage.setItem(x,JSON.stringify(t)),console.log(t),t),at=t=>{console.log("Додаємо до wishlist:",t);const e=T();e.includes(t)||(e.push(t),F(e))},ct=t=>{const e=T().filter(o=>o!==t);F(e)},H=t=>T().includes(t),j="theme",R=()=>localStorage.getItem(j)||"light",it=t=>localStorage.setItem(j,t),$=t=>{document.documentElement.setAttribute("data-theme",t),it(t)},_t=()=>{const e=R()==="dark"?"light":"dark";$(e)};let i=null;const lt=t=>{i=t,G(),J(i)},G=()=>{i!==null&&(Y(i)?n.addToCartBtn.textContent="Remove from Cart":n.addToCartBtn.textContent="Add to Cart")},Q=()=>{const t=document.querySelector(".categories__btn");t&&t.classList.add("categories__btn--active")},dt=(t,e,o)=>{t.forEach(s=>{s.classList.remove(o)}),e.classList.add(o)},v=()=>{document.querySelectorAll(".categories__btn").forEach(e=>e.classList.remove("categories__btn--active"))},E=()=>{n.productsList.innerHTML=""},ut=()=>{const t=document.querySelector(".nav__count");if(!t)return;const e=S();t.textContent=e.length},q=t=>{Array.isArray(t)&&n.countCartItem&&(n.countCartItem.textContent=t.length)},M=t=>{if(!Array.isArray(t)||!n.priceCartTotal)return;const e=t.reduce((o,s)=>o+s.price,0);n.priceCartTotal.textContent=`$${e.toFixed(2)}`},mt=()=>{const t=document.querySelector(".wishlist-items-count");if(!t)return;const e=T();t.textContent=e.length},J=t=>{H(t)?n.addToWishlistBtn.textContent="Remove from Wishlist":n.addToWishlistBtn.textContent="Add to Wishlist"},O=()=>window.location.pathname.includes("wishlist"),D=()=>window.location.pathname.includes("cart"),w=()=>{n.loadMoreBtn.classList.remove("is-hidden")},m=()=>{n.loadMoreBtn.classList.add("is-hidden")},g=()=>{n.notFoundDiv.classList.add("not-found--visible"),$(R())},y=()=>{n.notFoundDiv.classList.remove("not-found--visible"),$(R())},Ct=()=>{n.productsList.getBoundingClientRect().top<0?n.scrollBtn.classList.add("scroll-top-btn--visible"):n.scrollBtn.classList.remove("scroll-top-btn--visible")},h=()=>{loader&&loader.classList.remove("hidden")},d=()=>{loader&&loader.classList.add("hidden")},A=(t,e,o,s)=>{if(typeof t=="number"){const r=Math.ceil(t/s);return o<r}return Array.isArray(e)&&e.length===s};f.defaults.baseURL=et;const pt=async()=>{const{data:t}=await f(`${_.CATEGORIES}`);return t},I=async t=>{const e=(t-1)*u,{data:o}=await f(`${_.PRODUCTS}?limit=${u}&skip=${e}`);return o},K=async(t,e)=>{const o=(e-1)*u,{data:s}=await f(`${_.PRODUCTS_BY_CATEGORY}/${t}?limit=${u}&skip=${o}`);return s},gt=async t=>{const{data:e}=await f(`${_.PRODUCTS_BY_ID}/${t}`);return e},z=async t=>{try{const{data:e}=await f(`${_.PRODUCTS}?limit=0`);return e.products.filter(r=>t.includes(String(r.id)))}catch{return iziToast.error({title:"error",message:"No response from server. Please try again.",position:"topRight"}),[]}},V=async(t,e)=>{const o=(e-1)*u,{data:s}=await f(`${_.PRODUCTS_BY_QUERY}?q=${t}&limit=${u}&skip=${o}`);return s},X=t=>{t.code==="Escape"&&b()},Z=t=>{t.target===n.modal&&b()},ft=t=>{d(),n.modal.classList.add("modal--is-open"),document.body.style.overflow="hidden",window.addEventListener("keydown",X),n.modal.addEventListener("click",Z),lt(t)},b=()=>{n.modal.classList.remove("modal--is-open"),document.body.style.overflow="",window.removeEventListener("keydown",X),n.modal.removeEventListener("click",Z)};let c=1,L="All",P="";const vt=async()=>{try{h();const t=await pt();ot(t),Q()}catch{l.error({title:"error",message:"No response from server. Please try again.",position:"topRight"})}finally{d()}},ht=async()=>{try{h(),c=1;const{products:t,total:e}=await I(c);C(t);const o=Math.ceil(e/u);c>=o?l.info({message:"We're sorry, but you've reached the end.",position:"topRight"}):w()}catch{g(),l.error({title:"error",message:"No response from server. Please try again.",position:"topRight"})}finally{d()}},Lt=async()=>{c++,h(),m();try{let t;P?t=await V(P,c):L!=="All"?t=await K(L,c):t=await I(c);const{products:e=[],total:o}=t||{};e.length&&(C(e),A(o,e,c,u)?w():(m(),c>1&&l.info({message:"All items have been loaded.",position:"topRight"})))}catch{l.error({title:"Error",message:"No response from server. Please try again.",position:"topRight"})}finally{d()}},Pt=async t=>{const o=t.target.closest(".products__item").dataset.id;try{const s=await gt(o);ft(o),st(s)}catch{l.error({title:"error",message:"No response from server. Please try again.",position:"topRight"})}finally{d()}},St=async t=>{if(t.target.classList.contains("categories__btn")){h(),m(),E(),y(),c=1,P="";try{const e=t.target.textContent.trim();L=e;const o=document.querySelectorAll(".categories__btn");dt(o,t.target,"categories__btn--active");const s=e==="All"?await I(c):await K(e,c),{products:r=[],total:a}=s||{};r.length>0?(C(r),A(a,r,c,u)?w():m()):(v(),g())}catch(e){l.error({title:"Error",message:"No response from server. Please try again.",position:"topRight"}),v(),g(),console.log(e)}finally{d()}}},Tt=async t=>{t.preventDefault();const o=(t.currentTarget||t.target).elements.searchValue.value.trim();if(c=1,P=o,L="All",!o){v(),m();return}E(),y(),m();try{h();const{products:s,total:r}=await V(o,c);if(s.length===0){g();return}C(s),y(),A(r,s,c,u)?w():(m(),l.info({message:"We're sorry, but you've reached the end.",position:"topRight"}))}catch{l.error({title:"Error",message:"No response from server. Please try again.",position:"topRight"}),g()}finally{d(),v()}},wt=()=>{c=1,P="",L="All",E(),y(),n.form.reset(),m(),v(),Q(),ht()},W=async()=>{const t=S();if(!t.length){n.productsList.innerHTML="",g(),q([]),M([]);return}h();const e=await z(t);n.productsList.innerHTML="",C(e),q(e),M(e),y(),d()},bt=()=>{b()},Bt=()=>{i!==null&&(Y(i)?(nt(i),l.warning({title:"!",message:"Product successfully removed from cart",position:"topRight"}),D()&&W()):(rt(i),l.success({title:"Success",message:"Product successfully added to cart!",position:"topRight"}),D()&&W()),d(),G(),ut())},N=async()=>{const t=T();if(t.length===0){d(),n.productsList.innerHTML="",g();return}h();const e=await z(t);n.productsList.innerHTML="",C(e),d()},Rt=()=>{i!==null&&(H(i)?(ct(i),l.warning({title:"!",message:"Product successfully removed from wishlist",position:"topRight"}),O()&&N()):(at(i),l.success({title:"Success",message:"Product successfully added to wishlist!",position:"topRight"}),O()&&N(),y()),d(),J(i),mt())},$t=()=>{b()};export{N as L,$ as a,Bt as b,$t as c,Rt as d,Tt as e,ut as f,R as g,Pt as h,vt as i,ht as j,St as k,b as l,Lt as m,wt as n,Ct as o,W as p,bt as q,n as r,S as s,_t as t,mt as u,U as v,E as w,q as x,M as y};
//# sourceMappingURL=handlers-DmImfPDq.js.map
