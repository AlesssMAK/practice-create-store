import{a as u,i as d}from"./vendor-4yCzdkXl.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))s(c);new MutationObserver(c=>{for(const n of c)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function o(c){const n={};return c.integrity&&(n.integrity=c.integrity),c.referrerPolicy&&(n.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?n.credentials="include":c.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(c){if(c.ep)return;c.ep=!0;const n=o(c);fetch(c.href,n)}})();const W="https://dummyjson.com/",m={CATEGORIES:"products/category-list",PRODUCTS:"products",PRODUCTS_BY_ID:"products",PRODUCTS_BY_CATEGORY:"products/category",PRODUCTS_BY_QUERY:"products/search"},g=12,v="cart",b="wishlist";u.defaults.baseURL=W;const x=async()=>{const{data:t}=await u(`${m.CATEGORIES}`);return t},S=async t=>{const e=(t-1)*g,{data:o}=await u(`${m.PRODUCTS}?limit=${g}&skip=${e}`);return o},U=async t=>{const{data:e}=await u(`${m.PRODUCTS_BY_CATEGORY}/${t}`);return e},Y=async t=>{const{data:e}=await u(`${m.PRODUCTS_BY_ID}/${t}`);return e},k=async t=>{try{const{data:e}=await u(`${m.PRODUCTS}?limit=0`);return e.products.filter(c=>t.includes(String(c.id)))}catch(e){return console.error("Error fetching products:",e),[]}},N=async t=>{const{data:e}=await u(`${m.PRODUCTS_BY_QUERY}?q=${t}`);return e},p=()=>JSON.parse(localStorage.getItem(v))||[],P=t=>localStorage.setItem(v,JSON.stringify(t)),F=t=>{const e=p();e.includes(t)||(e.push(t),P(e))},j=t=>{const e=p().filter(o=>o!==t);P(e)},T=t=>p().includes(t),h=()=>JSON.parse(localStorage.getItem(b))||[],B=t=>localStorage.setItem(b,JSON.stringify(t)),G=t=>{console.log("Додаємо до wishlist:",t);const e=h();e.includes(t)||(e.push(t),B(e))},H=t=>{const e=h().filter(o=>o!==t);B(e)},w=t=>h().includes(t),r={categoryList:document.querySelector(".categories"),productsList:document.querySelector("ul.products"),notFoundDiv:document.querySelector(".not-found"),modalContainer:document.querySelector(".modal-product"),modalCloseBtn:document.querySelector(".modal__close-btn"),form:document.querySelector(".search-form"),formBtnClear:document.querySelector(".search-form__btn-clear"),modal:document.querySelector(".modal"),addToCartBtn:document.querySelector(".modal-product__btn--cart"),navCounter:document.querySelector(".nav__count"),loadMoreBtn:document.querySelector(".load-more-btn"),countCartItem:document.querySelector("[data-count]"),priceCartTotal:document.querySelector("[data-price]"),buyBtn:document.querySelector(".cart-summary__btn"),addToWishlistBtn:document.querySelector(".modal-product__btn--wishlist")},J=t=>{const o=["All",...t].map(s=>`<li class="categories__item">
   <button class="categories__btn" type="button">${s}</button>
 </li>`).join("");r.categoryList.innerHTML=o},y=t=>{const e=t.map(({id:o,thumbnail:s,title:c,brand:n,category:i,price:C})=>`
    <li class="products__item" data-id="${o}">
    <img class="products__image" src="${s}" alt="${c}"/>
    <p class="products__title">${c}</p>
    <p class="products__brand"><span class="products__brand--bold">Brand:</span>${n}</p>
    <p class="products__category">Category: ${i} </p>
    <p class="products__price">Price: $${C}</p>
 </li>
    `).join("");r.productsList.insertAdjacentHTML("beforeend",e)},Q=t=>{const{thumbnail:e,title:o,tags:s,description:c,shippingInformation:n,returnPolicy:i,price:C}=t,M=`
  <img class="modal-product__img" src="${e}" alt="${o}" />
      <div class="modal-product__content">
        <p class="modal-product__title">${o}</p>
        <ul class="modal-product__tags">${s}</ul>
        <p class="modal-product__description">${c}</p>
        <p class="modal-product__shipping-information">Shipping:${n}</p>
        <p class="modal-product__return-policy">Return Policy:${i}</p>
        <p class="modal-product__price">Price:${C} $</p>
        <button class="modal-product__buy-btn" type="button">Buy</button>
      </div>
  `;r.modalContainer.innerHTML=M};let a=null;const K=t=>{a=t,E(),q(a)},E=()=>{a!==null&&(T(a)?r.addToCartBtn.textContent="Remove from Cart":r.addToCartBtn.textContent="Add to Cart")},z=async()=>{const t=p();if(t.length)try{const e=await k(t);y(e),D(e),R(e)}catch(e){console.error("Помилка завантаження товарів:",e)}};document.addEventListener("DOMContentLoaded",()=>{r.buyBtn&&r.buyBtn.addEventListener("click",et),z()});document.addEventListener("DOMContentLoaded",()=>{r.productsList&&r.productsList.addEventListener("click",tt)});const $=t=>{t.code==="Escape"&&O()},I=t=>{t.target===r.modal&&O()},V=t=>{r.modal.classList.add("modal--is-open"),document.body.style.overflow="hidden",window.addEventListener("keydown",$),r.modal.addEventListener("click",I),K(t)},O=()=>{r.modal.classList.remove("modal--is-open"),document.body.style.overflow="",window.removeEventListener("keydown",$),r.modal.removeEventListener("click",I)};let l=1,X="";const it=async()=>{try{const t=await x();J(t),ot()}catch(t){d.error({title:"Error",message:t.message})}},Z=async()=>{try{const{products:t,total:e}=await S(l);y(t);const o=Math.ceil(e/g);l>=o?d.info({message:"We're sorry, but you've reached the end.",position:"topRight"}):L()}catch(t){d.error({title:"Error",message:t.message})}},lt=async()=>{l++,f();try{let t;X||(t=await S(l));const{products:e,total:o}=t;y(e);const s=Math.ceil(o/g);l<s&&L()}catch(t){d.error({title:"Error",message:t.message})}},tt=async t=>{const o=t.target.closest(".products__item").dataset.id;try{const s=await Y(o);V(o),Q(s)}catch(s){console.log(s)}},dt=async t=>{if(t.target.classList.contains("categories__btn")){f(),_();try{const e=t.target.textContent,o=document.querySelectorAll(".categories__btn");rt(o,t.target,"categories__btn--active");let s;e==="All"?(l=1,s=await S(l),L()):s=await U(e),s.products.length>0&&(y(s.products),f())}catch(e){d.error({title:"Error",message:e.message}),console.log(e)}}},ut=async t=>{t.preventDefault();const e=t.target.elements.searchValue.value.trim();if(e){_(),f();try{const{products:o}=await N(e);o.length===0?A():(y(o),nt())}catch(o){console.log(o)}}},mt=()=>{_(),r.form.reset(),Z()},pt=()=>{a!==null&&(T(a)?j(a):F(a),E(),st())},et=()=>{const t=JSON.parse(localStorage.getItem("cart"));if(!Array.isArray(t)||t.length===0){d.warning({title:"Oops!",message:"Кошик порожній. Додайте товари перед покупкою.",position:"topRight"});return}d.success({title:"Success",message:"You successfully bought all products in the cart!",position:"topRight"}),localStorage.removeItem("cart"),_(),D([]),R([])},yt=()=>{a!==null&&(w(a)?H(a):G(a),q(a),ct())},ot=()=>{const t=document.querySelector(".categories__btn");t&&t.classList.add("categories__btn--active")},rt=(t,e,o)=>{t.forEach(s=>{s.classList.remove(o)}),e.classList.add(o)},_=()=>{r.productsList.innerHTML=""},st=()=>{const t=document.querySelector(".nav__count");if(!t)return;const e=p();t.textContent=e.length},D=t=>{Array.isArray(t)&&r.countCartItem&&(r.countCartItem.textContent=t.length)},R=t=>{if(!Array.isArray(t)||!r.priceCartTotal)return;const e=t.reduce((o,s)=>o+s.price,0);r.priceCartTotal.textContent=`$${e.toFixed(2)}`},ct=()=>{const t=document.querySelector(".wishlist-items-count");if(!t)return;const e=h();t.textContent=e.length},q=t=>{w(t)?r.addToWishlistBtn.textContent="Remove from Wishlist":r.addToWishlistBtn.textContent="Add to Wishlist"},L=()=>{r.loadMoreBtn.classList.remove("is-hidden")},f=()=>{r.loadMoreBtn.classList.add("is-hidden")},A=()=>{r.notFoundDiv.classList.add("not-found--visible")},nt=()=>{r.notFoundDiv.classList.remove("not-found--visible")};export{pt as a,yt as b,O as c,y as d,it as e,k as f,h as g,tt as h,Z as i,dt as j,lt as k,ut as l,mt as m,r,ct as u};
//# sourceMappingURL=helpers-ZFD75nvH.js.map
