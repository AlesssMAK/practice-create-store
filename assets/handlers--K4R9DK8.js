import{a as u,i as h}from"./vendor-4yCzdkXl.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))c(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const d of n.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&c(d)}).observe(document,{childList:!0,subtree:!0});function o(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function c(r){if(r.ep)return;r.ep=!0;const n=o(r);fetch(r.href,n)}})();const s={categoryList:document.querySelector(".categories"),productsList:document.querySelector("ul.products"),notFoundDiv:document.querySelector(".not-found"),modalContainer:document.querySelector(".modal-product"),modalCloseBtn:document.querySelector(".modal__close-btn"),form:document.querySelector(".search-form"),formBtnClear:document.querySelector(".search-form__btn-clear"),modal:document.querySelector(".modal"),addToCartBtn:document.querySelector(".modal-product__btn--cart"),navCounter:document.querySelector(".nav__count"),loadMoreBtn:document.querySelector(".load-more-btn"),countCartItem:document.querySelector("[data-count]"),priceCartTotal:document.querySelector("[data-price]"),buyBtn:document.querySelector(".cart-summary__btn"),addToWishlistBtn:document.querySelector(".modal-product__btn--wishlist"),scrollBtn:document.querySelector(".scroll-top-btn"),header:document.querySelector("header")},z="https://dummyjson.com/",p={CATEGORIES:"products/category-list",PRODUCTS:"products",PRODUCTS_BY_ID:"products",PRODUCTS_BY_CATEGORY:"products/category",PRODUCTS_BY_QUERY:"products/search"},y=12,O="cart",D="wishlist",V=t=>{const o=["All",...t].map(c=>`<li class="categories__item">
   <button class="categories__btn" type="button">${c}</button>
 </li>`).join("");s.categoryList.innerHTML=o},g=t=>{const e=t.map(({id:o,thumbnail:c,title:r,brand:n,category:d,price:P})=>`
    <li class="products__item" data-id="${o}">
    <img class="products__image" src="${c}" alt="${r}"/>
    <p class="products__title">${r}</p>
    <p class="products__brand"><span class="products__brand--bold">Brand:</span>${n}</p>
    <p class="products__category">Category: ${d} </p>
    <p class="products__price">Price: $${P}</p>
 </li>
    `).join("");s.productsList.insertAdjacentHTML("beforeend",e)},X=t=>{const{thumbnail:e,title:o,tags:c,description:r,shippingInformation:n,returnPolicy:d,price:P}=t,Q=`
  <img class="modal-product__img" src="${e}" alt="${o}" />
      <div class="modal-product__content">
        <p class="modal-product__title">${o}</p>
        <ul class="modal-product__tags">${c}</ul>
        <p class="modal-product__description">${r}</p>
        <p class="modal-product__shipping-information">Shipping:${n}</p>
        <p class="modal-product__return-policy">Return Policy:${d}</p>
        <p class="modal-product__price">Price:${P} $</p>
        
      </div>
  `;s.modalContainer.innerHTML=Q},_=()=>JSON.parse(localStorage.getItem(O))||[],W=t=>localStorage.setItem(O,JSON.stringify(t)),Z=t=>{const e=_();e.includes(t)||(e.push(t),W(e))},tt=t=>{const e=_().filter(o=>o!==t);W(e)},x=t=>_().includes(t),C=()=>JSON.parse(localStorage.getItem(D))||[],k=t=>(localStorage.setItem(D,JSON.stringify(t)),console.log(t),t),et=t=>{console.log("Додаємо до wishlist:",t);const e=C();e.includes(t)||(e.push(t),k(e))},ot=t=>{const e=C().filter(o=>o!==t);k(e)},U=t=>C().includes(t),Y="theme",w=()=>localStorage.getItem(Y)||"light",st=t=>localStorage.setItem(Y,t),B=t=>{document.documentElement.setAttribute("data-theme",t),st(t)},yt=()=>{const e=w()==="dark"?"light":"dark";B(e)};let a=null;const rt=t=>{a=t,F(),j(a)},F=()=>{a!==null&&(x(a)?s.addToCartBtn.textContent="Remove from Cart":s.addToCartBtn.textContent="Add to Cart")},N=()=>{const t=document.querySelector(".categories__btn");t&&t.classList.add("categories__btn--active")},ct=(t,e,o)=>{t.forEach(c=>{c.classList.remove(o)}),e.classList.add(o)},H=()=>{document.querySelectorAll(".categories__btn").forEach(e=>e.classList.remove("categories__btn--active")),console.log("ok clearActiveCategoryBtn")},b=()=>{s.productsList.innerHTML=""},nt=()=>{const t=document.querySelector(".nav__count");if(!t)return;const e=_();t.textContent=e.length},E=t=>{Array.isArray(t)&&s.countCartItem&&(s.countCartItem.textContent=t.length)},I=t=>{if(!Array.isArray(t)||!s.priceCartTotal)return;const e=t.reduce((o,c)=>o+c.price,0);s.priceCartTotal.textContent=`$${e.toFixed(2)}`},at=()=>{const t=document.querySelector(".wishlist-items-count");if(!t)return;const e=C();t.textContent=e.length},j=t=>{U(t)?s.addToWishlistBtn.textContent="Remove from Wishlist":s.addToWishlistBtn.textContent="Add to Wishlist"},R=()=>window.location.pathname.includes("wishlist"),q=()=>window.location.pathname.includes("cart"),S=()=>{s.loadMoreBtn.classList.remove("is-hidden")},f=()=>{s.loadMoreBtn.classList.add("is-hidden")},T=()=>{s.notFoundDiv.classList.add("not-found--visible"),B(w())},L=()=>{s.notFoundDiv.classList.remove("not-found--visible"),B(w())},ft=()=>{s.productsList.getBoundingClientRect().top<0?s.scrollBtn.classList.add("scroll-top-btn--visible"):s.scrollBtn.classList.remove("scroll-top-btn--visible")},m=()=>{loader&&loader.classList.remove("hidden")},i=()=>{loader&&loader.classList.add("hidden")};u.defaults.baseURL=z;const it=async()=>{const{data:t}=await u(`${p.CATEGORIES}`);return t},$=async t=>{const e=(t-1)*y,{data:o}=await u(`${p.PRODUCTS}?limit=${y}&skip=${e}`);return o},lt=async t=>{const{data:e}=await u(`${p.PRODUCTS_BY_CATEGORY}/${t}`);return e},dt=async t=>{const{data:e}=await u(`${p.PRODUCTS_BY_ID}/${t}`);return e},G=async t=>{try{const{data:e}=await u(`${p.PRODUCTS}?limit=0`);return e.products.filter(r=>t.includes(String(r.id)))}catch(e){return console.error("Error fetching products:",e),[]}},ut=async t=>{const{data:e}=await u(`${p.PRODUCTS_BY_QUERY}?q=${t}`);return e},J=t=>{t.code==="Escape"&&v()},K=t=>{t.target===s.modal&&v()},mt=t=>{i(),s.modal.classList.add("modal--is-open"),document.body.style.overflow="hidden",window.addEventListener("keydown",J),s.modal.addEventListener("click",K),rt(t)},v=()=>{s.modal.classList.remove("modal--is-open"),document.body.style.overflow="",window.removeEventListener("keydown",J),s.modal.removeEventListener("click",K)};let l=1,pt="All";const _t=async()=>{try{m();const t=await it();V(t),N()}catch(t){console.log(t)}finally{i()}},gt=async()=>{try{m(),l=1;const{products:t,total:e}=await $(l);g(t);const o=Math.ceil(e/y);l>=o?h.info({message:"We're sorry, but you've reached the end.",position:"topRight"}):S()}catch(t){console.log(t)}finally{i()}},Ct=async()=>{l++,m(),f();try{const{products:t,total:e}=await $(l);g(t);const o=Math.ceil(e/y);l<o&&S()}catch(t){console.log(t)}finally{i()}},Lt=async t=>{const o=t.target.closest(".products__item").dataset.id;try{const c=await dt(o);mt(o),X(c)}catch(c){console.log(c)}finally{i()}},St=async t=>{if(t.target.classList.contains("categories__btn")){m(),f(),b(),l=1;try{const e=t.target.textContent;pt=e;const o=document.querySelectorAll(".categories__btn");ct(o,t.target,"categories__btn--active");let c;if(e==="All"?(l=1,c=await $(l),S()):c=await lt(e),c.products.length>0){if(g(c.products),f(),L(),e==="All"){const r=Math.ceil(c.total/y);l<r&&S()}}else T()}catch(e){console.log(e)}finally{i()}}},Tt=async t=>{t.preventDefault();const e=t.target.elements.searchValue.value.trim();if(e){b(),f();try{m();const{products:o}=await ut(e);o.length===0?T():(g(o),L())}catch(o){console.log(o)}finally{i(),H()}}},vt=()=>{b(),L(),s.form.reset(),f(),H(),N(),gt()},A=async()=>{const t=_();if(!t.length){s.productsList.innerHTML="",T(),E([]),I([]);return}m();const e=await G(t);s.productsList.innerHTML="",g(e),E(e),I(e),L(),i()},Pt=()=>{v()},wt=()=>{a!==null&&(x(a)?(tt(a),h.warning({title:"!",message:"Товар усунуто з кошика",position:"topRight"}),q()&&A()):(Z(a),h.success({title:"Success",message:"Товар додано у кошик!",position:"topRight"}),q()&&A()),i(),F(),nt())},M=async()=>{const t=C();if(t.length===0){i(),s.productsList.innerHTML="",T();return}m();const e=await G(t);s.productsList.innerHTML="",g(e),i()},Bt=()=>{a!==null&&(U(a)?(ot(a),h.warning({title:"!",message:"Товар усунуто зі списку бажань",position:"topRight"}),R()&&M()):(et(a),h.success({title:"Success",message:"Товар додано у список бажань!",position:"topRight"}),R()&&M(),L()),i(),j(a),at())},bt=()=>{v()};export{M as L,B as a,wt as b,bt as c,Bt as d,Tt as e,nt as f,w as g,Lt as h,_t as i,gt as j,St as k,v as l,Ct as m,vt as n,ft as o,A as p,Pt as q,s as r,_ as s,yt as t,at as u,W as v,b as w,E as x,I as y};
//# sourceMappingURL=handlers--K4R9DK8.js.map
