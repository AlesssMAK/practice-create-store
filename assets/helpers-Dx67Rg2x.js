import{a as d,i as S}from"./vendor-4yCzdkXl.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function o(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=o(s);fetch(s.href,a)}})();const x="https://dummyjson.com/",u={CATEGORIES:"products/category-list",PRODUCTS:"products",PRODUCTS_BY_ID:"products",PRODUCTS_BY_CATEGORY:"products/category",PRODUCTS_BY_QUERY:"products/search"},m=12,v="cart",P="wishlist";d.defaults.baseURL=x;const Y=async()=>{const{data:t}=await d(`${u.CATEGORIES}`);return t},T=async t=>{const e=(t-1)*m,{data:o}=await d(`${u.PRODUCTS}?limit=${m}&skip=${e}`);return o},U=async t=>{const{data:e}=await d(`${u.PRODUCTS_BY_CATEGORY}/${t}`);return e},k=async t=>{const{data:e}=await d(`${u.PRODUCTS_BY_ID}/${t}`);return e},lt=async t=>{try{const{data:e}=await d(`${u.PRODUCTS}?limit=0`);return e.products.filter(s=>t.includes(String(s.id)))}catch(e){return console.error("Error fetching products:",e),[]}},N=async t=>{const{data:e}=await d(`${u.PRODUCTS_BY_QUERY}?q=${t}`);return e},y=()=>JSON.parse(localStorage.getItem(v))||[],b=t=>localStorage.setItem(v,JSON.stringify(t)),F=t=>{const e=y();e.includes(t)||(e.push(t),b(e))},H=t=>{const e=y().filter(o=>o!==t);b(e)},L=t=>y().includes(t),h=()=>JSON.parse(localStorage.getItem(P))||[],B=t=>localStorage.setItem(P,JSON.stringify(t)),j=t=>{console.log("Додаємо до wishlist:",t);const e=h();e.includes(t)||(e.push(t),B(e))},G=t=>{const e=h().filter(o=>o!==t);B(e)},w=t=>h().includes(t),$="theme",J=()=>localStorage.getItem($)||"light",K=t=>localStorage.setItem($,t),Q=t=>{document.documentElement.setAttribute("data-theme",t),K(t)},it=()=>{const e=J()==="dark"?"light":"dark";Q(e)},c={categoryList:document.querySelector(".categories"),productsList:document.querySelector("ul.products"),notFoundDiv:document.querySelector(".not-found"),modalContainer:document.querySelector(".modal-product"),modalCloseBtn:document.querySelector(".modal__close-btn"),form:document.querySelector(".search-form"),formBtnClear:document.querySelector(".search-form__btn-clear"),modal:document.querySelector(".modal"),addToCartBtn:document.querySelector(".modal-product__btn--cart"),navCounter:document.querySelector(".nav__count"),loadMoreBtn:document.querySelector(".load-more-btn"),countCartItem:document.querySelector("[data-count]"),priceCartTotal:document.querySelector("[data-price]"),buyBtn:document.querySelector(".cart-summary__btn"),addToWishlistBtn:document.querySelector(".modal-product__btn--wishlist")},z=t=>{const o=["All",...t].map(r=>`<li class="categories__item">
   <button class="categories__btn" type="button">${r}</button>
 </li>`).join("");c.categoryList.innerHTML=o},f=t=>{const e=t.map(({id:o,thumbnail:r,title:s,brand:a,category:i,price:C})=>`
    <li class="products__item" data-id="${o}">
    <img class="products__image" src="${r}" alt="${s}"/>
    <p class="products__title">${s}</p>
    <p class="products__brand"><span class="products__brand--bold">Brand:</span>${a}</p>
    <p class="products__category">Category: ${i} </p>
    <p class="products__price">Price: $${C}</p>
 </li>
    `).join("");c.productsList.insertAdjacentHTML("beforeend",e)},dt=(t,e)=>{t.innerHTML=`<p class="empty-message">${e}</p>`},V=t=>{const{thumbnail:e,title:o,tags:r,description:s,shippingInformation:a,returnPolicy:i,price:C}=t,W=`
  <img class="modal-product__img" src="${e}" alt="${o}" />
      <div class="modal-product__content">
        <p class="modal-product__title">${o}</p>
        <ul class="modal-product__tags">${r}</ul>
        <p class="modal-product__description">${s}</p>
        <p class="modal-product__shipping-information">Shipping:${a}</p>
        <p class="modal-product__return-policy">Return Policy:${i}</p>
        <p class="modal-product__price">Price:${C} $</p>
        <button class="modal-product__buy-btn" type="button">Buy</button>
      </div>
  `;c.modalContainer.innerHTML=W},I=t=>{t.code==="Escape"&&A()},E=t=>{t.target===c.modal&&A()},X=t=>{c.modal.classList.add("modal--is-open"),document.body.style.overflow="hidden",window.addEventListener("keydown",I),c.modal.addEventListener("click",E),tt(t)},A=()=>{c.modal.classList.remove("modal--is-open"),document.body.style.overflow="",window.removeEventListener("keydown",I),c.modal.removeEventListener("click",E)};let l=1,O="All";const ut=async()=>{try{const t=await Y();z(t),et()}catch(t){console.log(t)}},Z=async()=>{try{l=1;const{products:t,total:e}=await T(l);f(t);const o=Math.ceil(e/m);l>=o?S.info({message:"We're sorry, but you've reached the end.",position:"topRight"}):p()}catch(t){console.log(t)}},mt=async()=>{if(O==="All"){l++,g();try{const{products:t,total:e}=await T(l);f(t);const o=Math.ceil(e/m);l<o&&p()}catch(t){console.log(t)}}},pt=async t=>{const o=t.target.closest(".products__item").dataset.id;try{const r=await k(o);X(o),V(r)}catch(r){console.log(r)}},gt=async t=>{if(t.target.classList.contains("categories__btn")){g(),_(),l=1;try{const e=t.target.textContent;O=e;const o=document.querySelectorAll(".categories__btn");ot(o,t.target,"categories__btn--active");let r;if(e==="All"?(l=1,r=await T(l),p()):r=await U(e),r.products.length>0){if(f(r.products),g(),e==="All"){const s=Math.ceil(r.total/m);l<s&&p()}}else D()}catch(e){console.log(e)}}},yt=async t=>{t.preventDefault();const e=t.target.elements.searchValue.value.trim();if(e){_(),g();try{const{products:o}=await N(e);o.length===0?D():(f(o),M())}catch(o){console.log(o)}}},ht=()=>{_(),M(),c.form.reset(),Z()},ft=()=>{n!==null&&(L(n)?H(n):F(n),R(),st())},_t=()=>{const t=JSON.parse(localStorage.getItem("cart"));if(!Array.isArray(t)||t.length===0){S.warning({title:"Oops!",message:"Кошик порожній. Додайте товари перед покупкою.",position:"topRight"});return}S.success({title:"Success",message:"You successfully bought all products in the cart!",position:"topRight"}),localStorage.removeItem("cart"),_(),rt([]),ct([])},Ct=()=>{n!==null&&(w(n)?G(n):j(n),q(n),at())};let n=null;const tt=t=>{n=t,R(),q(n)},R=()=>{n!==null&&(L(n)?c.addToCartBtn.textContent="Remove from Cart":c.addToCartBtn.textContent="Add to Cart")},et=()=>{const t=document.querySelector(".categories__btn");t&&t.classList.add("categories__btn--active")},ot=(t,e,o)=>{t.forEach(r=>{r.classList.remove(o)}),e.classList.add(o)},_=()=>{c.productsList.innerHTML=""},st=()=>{const t=document.querySelector(".nav__count");if(!t)return;const e=y();t.textContent=e.length},rt=t=>{Array.isArray(t)&&c.countCartItem&&(c.countCartItem.textContent=t.length)},ct=t=>{if(!Array.isArray(t)||!c.priceCartTotal)return;const e=t.reduce((o,r)=>o+r.price,0);c.priceCartTotal.textContent=`$${e.toFixed(2)}`},at=()=>{const t=document.querySelector(".wishlist-items-count");if(!t)return;const e=h();t.textContent=e.length},q=t=>{w(t)?c.addToWishlistBtn.textContent="Remove from Wishlist":c.addToWishlistBtn.textContent="Add to Wishlist"},p=()=>{c.loadMoreBtn.classList.remove("is-hidden")},g=()=>{c.loadMoreBtn.classList.add("is-hidden")},D=()=>{c.notFoundDiv.classList.add("not-found--visible")},M=()=>{c.notFoundDiv.classList.remove("not-found--visible")};export{Q as a,ft as b,Ct as c,st as d,h as e,dt as f,J as g,pt as h,lt as i,f as j,A as k,ut as l,Z as m,gt as n,mt as o,yt as p,ht as q,c as r,_t as s,it as t,at as u,y as v,rt as w,ct as x};
//# sourceMappingURL=helpers-Dx67Rg2x.js.map
