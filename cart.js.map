{"version":3,"file":"cart.js","sources":["../src/cart.js"],"sourcesContent":["//Логіка сторінки Cart\n\nimport {\n  buyBtnCart,\n  handleProductsListItemClick,\n  addProductByIdToCart,\n  addProductByIdToWishlist,\n} from './js/handlers';\nimport * as helpers from './js/helpers';\nimport { fetchProductsByIds } from './js/products-api';\nimport { refs } from './js/refs';\nimport { renderEmptyMessage, renderProducts } from './js/render-function';\nimport { getCart, getTheme, applyTheme, toggleTheme } from './js/storage';\nimport { closeModal } from './js/modal';\n\napplyTheme(getTheme());\nconst themeToggleBtn = document.querySelector('.theme-toggle-btn');\nif (themeToggleBtn) {\n  themeToggleBtn.addEventListener('click', toggleTheme);\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  helpers.updateCartCounter();\n  helpers.updateWishlistCounter();\n});\n\nconst loadCartProducts = async () => {\n  const cartListItems = getCart();\n\n  if (!cartListItems.length) {\n    renderEmptyMessage(refs.productsList, 'Your cart is empty.');\n    helpers.updateCartSummary([]);\n    helpers.updateCartTotal([]);\n    return;\n  }\n\n  try {\n    const products = await fetchProductsByIds(cartListItems);\n    refs.productsList.innerHTML = '';\n    renderProducts(products);\n    helpers.updateCartSummary(products);\n    helpers.updateCartTotal(products);\n  } catch (error) {\n    console.error('Помилка завантаження товарів:', error);\n  }\n};\n\nconst handleBackdropClick = event => {\n  if (event.target === refs.modal) {\n    loadCartProducts();\n    refs.modal.removeEventListener('click', handleBackdropClick);\n  }\n};\n\nconst closeModalCartlist = () => {\n  closeModal();\n  loadCartProducts();\n  refs.modal.removeEventListener('click', handleBackdropClick);\n};\n\nconst handleCartItemClick = async event => {\n  refs.modal.addEventListener('click', handleBackdropClick);\n  handleProductsListItemClick(event);\n};\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  if (refs.buyBtn) {\n    refs.buyBtn.addEventListener('click', buyBtnCart);\n  }\n  loadCartProducts();\n});\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  if (refs.productsList) {\n    refs.productsList.addEventListener('click', handleCartItemClick);\n  }\n  refs.modalCloseBtn.addEventListener('click', closeModalCartlist);\n  refs.addToCartBtn.addEventListener('click', addProductByIdToCart);\n  refs.addToWishlistBtn.addEventListener('click', addProductByIdToWishlist);\n});\n\nhelpers.updateCartCounter();\n"],"names":["applyTheme","getTheme","themeToggleBtn","toggleTheme","helpers.updateCartCounter","helpers.updateWishlistCounter","loadCartProducts","cartListItems","getCart","renderEmptyMessage","refs","helpers.updateCartSummary","helpers.updateCartTotal","products","fetchProductsByIds","renderProducts","error","handleBackdropClick","event","closeModalCartlist","closeModal","handleCartItemClick","handleProductsListItemClick","buyBtnCart","addProductByIdToCart","addProductByIdToWishlist"],"mappings":"qMAeAA,EAAWC,EAAU,CAAA,EACrB,MAAMC,EAAiB,SAAS,cAAc,mBAAmB,EAC7DA,GACFA,EAAe,iBAAiB,QAASC,CAAW,EAGtD,SAAS,iBAAiB,mBAAoB,IAAM,CAClDC,IACAC,GACF,CAAC,EAED,MAAMC,EAAmB,SAAY,CACnC,MAAMC,EAAgBC,IAEtB,GAAI,CAACD,EAAc,OAAQ,CACzBE,EAAmBC,EAAK,aAAc,qBAAqB,EAC3DC,EAA0B,CAAE,CAAA,EAC5BC,EAAwB,CAAE,CAAA,EAC1B,MACD,CAED,GAAI,CACF,MAAMC,EAAW,MAAMC,EAAmBP,CAAa,EACvDG,EAAK,aAAa,UAAY,GAC9BK,EAAeF,CAAQ,EACvBF,EAA0BE,CAAQ,EAClCD,EAAwBC,CAAQ,CACjC,OAAQG,EAAO,CACd,QAAQ,MAAM,gCAAiCA,CAAK,CACrD,CACH,EAEMC,EAAsBC,GAAS,CAC/BA,EAAM,SAAWR,EAAK,QACxBJ,IACAI,EAAK,MAAM,oBAAoB,QAASO,CAAmB,EAE/D,EAEME,EAAqB,IAAM,CAC/BC,IACAd,IACAI,EAAK,MAAM,oBAAoB,QAASO,CAAmB,CAC7D,EAEMI,EAAsB,MAAMH,GAAS,CACzCR,EAAK,MAAM,iBAAiB,QAASO,CAAmB,EACxDK,EAA4BJ,CAAK,CACnC,EAEA,SAAS,iBAAiB,mBAAoB,IAAM,CAC9CR,EAAK,QACPA,EAAK,OAAO,iBAAiB,QAASa,CAAU,EAElDjB,GACF,CAAC,EAED,SAAS,iBAAiB,mBAAoB,IAAM,CAC9CI,EAAK,cACPA,EAAK,aAAa,iBAAiB,QAASW,CAAmB,EAEjEX,EAAK,cAAc,iBAAiB,QAASS,CAAkB,EAC/DT,EAAK,aAAa,iBAAiB,QAASc,CAAoB,EAChEd,EAAK,iBAAiB,iBAAiB,QAASe,CAAwB,CAC1E,CAAC,EAEDrB,EAA2B"}